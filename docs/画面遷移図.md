```mermaid
graph TD
    Start[スタート画面] --> MainMenu[メインメニュー画面]
    
    MainMenu --> CreateRoom[ルーム作成画面]
    MainMenu --> RoomList[ルーム一覧画面]
    MainMenu --> CodeInput[ルームコード入力]
    MainMenu --> Rules[ルール説明画面]
    MainMenu --> Settings[設定画面]
    
    CreateRoom --> |作成| RoomWait[ルーム待機画面<br/>ホスト]
    CreateRoom --> |キャンセル| MainMenu
    
    RoomList --> |ルーム選択| RoomWait
    RoomList --> |戻る| MainMenu
    
    CodeInput --> |入力・参加| RoomWait
    CodeInput --> |キャンセル| MainMenu
    
    Rules --> |戻る| MainMenu
    Settings --> |戻る| MainMenu
    
    RoomWait --> |退出| MainMenu
    RoomWait --> |ホストが開始| Game[ゲーム画面]
    RoomWait --> |ルール確認| Rules2[ルール説明画面<br/>ルーム内]
    
    Rules2 --> |戻る| RoomWait
    
    Game --> |メニュー| PauseMenu[ゲーム中メニュー]
    Game --> |ゲーム終了| Result[リザルト画面]
    Game --> |カード選択| CardSelect[カード選択状態]
    Game --> |プレイ不可表示| CannotPlay[出せるカードなし<br/>ダイアログ]
    Game --> |切断検知| Disconnect[切断警告<br/>ダイアログ]
    
    CardSelect --> |カード確定| CardConfirm[カード出す確認<br/>ダイアログ]
    CardSelect --> |キャンセル| Game
    
    CardConfirm --> |確定| Game
    CardConfirm --> |キャンセル| CardSelect
    
    CannotPlay --> |OK| Game
    
    Disconnect --> |再接続| Game
    Disconnect --> |退出| MainMenu
    
    PauseMenu --> |ゲームに戻る| Game
    PauseMenu --> |ルール確認| Rules3[ルール説明画面<br/>ゲーム中]
    PauseMenu --> |ゲーム終了| Result
    
    Rules3 --> |戻る| PauseMenu
    
    Result --> |もう一度| RoomWait
    Result --> |ルームに戻る| RoomWait
    Result --> |メニューへ| MainMenu
    
    style Start fill:#e1f5ff
    style MainMenu fill:#fff4e1
    style Game fill:#ffe1e1
    style Result fill:#e1ffe1
    style RoomWait fill:#f0e1ff
```

## 📊 遷移図の補足説明

### 主要な遷移パターン

**1. 新規ルーム作成の流れ**
- メインメニュー → ルーム作成 → ルーム待機（ホスト） → ゲーム → リザルト

**2. 既存ルーム参加の流れ**
- メインメニュー → ルーム一覧 → ルーム待機 → ゲーム → リザルト
- メインメニュー → コード入力 → ルーム待機 → ゲーム → リザルト

**3. ゲーム中の分岐**
- ゲーム画面 ⇄ ゲーム中メニュー ⇄ ルール確認
- ゲーム終了時 → リザルト → 再戦 or メニューへ

### 色分けの意味
- 🔵 **水色**: スタート画面
- 🟡 **黄色**: メインメニュー
- 🔴 **赤色**: ゲーム画面
- 🟢 **緑色**: リザルト画面
- 🟣 **紫色**: ルーム待機画面

## 🎮 ゲーム画面内の遷移の説明

### 追加した遷移

**1. カードプレイの流れ**
- ゲーム画面 → カード選択状態 → 確認ダイアログ → ゲーム画面

**2. プレイ不可の状態**
- 出せるカードがない場合 → ダイアログ表示 → ゲーム画面に戻る
- パスやスキップのアクション

**3. 切断・エラー処理**
- 通信切断検知 → 警告ダイアログ → 再接続 or 退出

**4. ゲーム中メニュー**
- 一時停止 → メニュー表示 → ゲームに戻る/ルール確認/終了

---