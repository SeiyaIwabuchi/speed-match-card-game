# スピードマッチ - 機能一覧

## 📖 アプリ概要

**スピードマッチ**は、2〜4人でリアルタイムに対戦できるオンライン対戦型カードゲームアプリです。シンプルなルールで誰でも楽しめ、友達を招待してプライベートルームで遊んだり、公開ルームで知らない人と対戦したりできます。

### ゲームルール
- 場に出ているカードより「±1以内の数字」または「同じ数字」のカードを手札から出せる
- 最初に手札を全て出し切ったプレイヤーが勝利
- 1〜13の数字カードを使用
- ターン制で順番にカードをプレイ

---

## 🎯 機能カテゴリ

### 1. アカウント・プレイヤー管理機能

#### 1.1 プレイヤー登録
- **概要**: 初回起動時にプレイヤー名を設定
- **詳細**:
  - プレイヤー名の入力（3〜12文字）
  - 名前の重複チェック
  - アバター選択（絵文字または初期文字）
  - ローカルストレージに保存

#### 1.2 プレイヤー情報編集
- **概要**: プレイヤー名やアバターを変更
- **詳細**:
  - 設定画面からアクセス
  - プレイヤー名の変更
  - アバターの変更
  - 変更の即時反映

#### 1.3 プレイヤー統計
- **概要**: 自分のプレイ記録を確認
- **詳細**:
  - 総対戦数
  - 勝利数・敗北数
  - 勝率
  - 最速クリアターン数

---

### 2. ルーム管理機能

#### 2.1 ルーム作成
- **概要**: 新規ゲームルームを作成
- **詳細**:
  - ルーム名の設定（任意）
  - 最大プレイヤー数の選択（2〜4人）
  - 初期手札枚数の設定（5〜10枚）
  - ターン制限時間の設定（なし/30秒/60秒）
  - 公開/非公開の選択
  - ルームコードの自動生成（6桁）

#### 2.2 ルーム一覧表示
- **概要**: 参加可能な公開ルームを表示
- **詳細**:
  - リアルタイム更新
  - ルーム情報の表示
    - ルーム名
    - ホスト名
    - 現在の参加人数/最大人数
    - ゲーム設定（手札枚数、制限時間）
  - フィルタリング機能（人数、状態）
  - 更新ボタン

#### 2.3 ルームコード参加
- **概要**: 6桁のコードで友達のルームに参加
- **詳細**:
  - コード入力フォーム
  - コードの検証
  - エラーメッセージ表示
  - 参加後、ルーム待機画面へ遷移

#### 2.4 ルーム退出
- **概要**: ゲーム開始前にルームから退出
- **詳細**:
  - 退出確認ダイアログ
  - ホストが退出した場合の処理
    - 次の参加者にホスト権限を移譲
    - または全員を退出させる
  - メインメニューへ戻る

---

### 3. ルーム待機機能

#### 3.1 参加者リスト表示
- **概要**: 現在のルーム参加者を表示
- **詳細**:
  - プレイヤーアバター
  - プレイヤー名
  - 準備状態（準備完了/待機中）
  - ホストバッジ表示

#### 3.2 ルーム情報表示
- **概要**: ルームの設定情報を表示
- **詳細**:
  - ルームコード（コピー機能付き）
  - ルーム名
  - 最大人数
  - 初期手札枚数
  - ターン制限時間
  - 公開/非公開

#### 3.3 チャット機能
- **概要**: ルーム内でテキストチャット
- **詳細**:
  - メッセージ送信
  - メッセージ履歴表示（最新20件）
  - 送信者名の表示
  - タイムスタンプ
  - 定型文クイックメッセージ

#### 3.4 準備完了システム
- **概要**: プレイヤーがゲーム開始の準備完了を通知
- **詳細**:
  - 準備完了ボタン
  - 準備完了状態の表示
  - 全員が準備完了でホストのスタートボタンが有効化

#### 3.5 ゲーム開始
- **概要**: ホストがゲームを開始
- **詳細**:
  - スタートボタン（ホストのみ表示）
  - 全員準備完了の確認
  - カウントダウン演出（3, 2, 1, Start!）
  - ゲーム画面への遷移

---

### 4. ゲームプレイ機能

#### 4.1 ゲーム画面表示
- **概要**: ゲームの現在状態を表示
- **詳細**:
  - 場のカード表示（中央）
  - 自分の手札表示（下部）
  - 他プレイヤー情報（上部・左右）
    - アバター
    - プレイヤー名
    - 残り手札枚数
    - 現在のターン表示
  - 山札の残り枚数
  - ターン制限時間タイマー

#### 4.2 カードプレイ
- **概要**: 手札からカードを選んで場に出す
- **詳細**:
  - カードクリックで選択
  - 選択したカードのハイライト
  - 出せるカードの判定
    - 場のカード±1
    - 同じ数字
  - 出せないカードは選択不可（グレーアウト）
  - 確認ダイアログ表示
  - カードを出すアニメーション

#### 4.3 ターン管理
- **概要**: プレイヤーのターンを管理
- **詳細**:
  - 現在のターンプレイヤーの強調表示
  - ターン時間制限のカウントダウン
  - 時間切れの処理
    - 自動でパス
    - ペナルティ（山札から1枚引く）
  - ターン終了後、次のプレイヤーへ

#### 4.4 山札から引く
- **概要**: 出せるカードがない場合に山札から引く
- **詳細**:
  - 「カードを引く」ボタン
  - 山札からランダムに1枚取得
  - 手札に追加
  - アニメーション表示
  - ターン終了

#### 4.5 パス機能
- **概要**: 手札を出さずにターンをパス（オプション）
- **詳細**:
  - 「パス」ボタン
  - 確認ダイアログ
  - ターンを次のプレイヤーへ

#### 4.6 ゲーム終了判定
- **概要**: 勝者を判定してゲームを終了
- **詳細**:
  - プレイヤーの手札が0枚になったら勝利
  - 勝利演出（アニメーション・効果音）
  - リザルト画面への遷移

---

### 5. ゲーム中の補助機能

#### 5.1 ゲーム中メニュー
- **概要**: ゲーム中に一時停止して操作
- **詳細**:
  - メニューボタン
  - ゲームに戻る
  - ルール確認
  - ゲームを終了（確認あり）

#### 5.2 ルール説明表示
- **概要**: いつでもルールを確認
- **詳細**:
  - ゲームの流れ
  - カードの出し方
  - 勝利条件
  - スクロール可能
  - 閉じるボタン

#### 5.3 切断検知
- **概要**: プレイヤーの通信切断を検知
- **詳細**:
  - 切断の自動検知
  - 切断警告ダイアログ表示
  - 再接続の試行
  - 再接続失敗時の処理
    - CPUに置き換え（オプション）
    - またはゲーム終了

#### 5.4 リアルタイム同期
- **概要**: 全プレイヤーの画面を同期
- **詳細**:
  - WebSocketによるリアルタイム通信
  - ゲーム状態の即座な反映
  - カードプレイのアニメーション同期
  - ラグ補正

---

### 6. リザルト機能

#### 6.1 順位表示
- **概要**: ゲーム終了後の結果を表示
- **詳細**:
  - 1位〜4位の順位
  - プレイヤー名とアバター
  - ポイント/スコア表示

#### 6.2 統計情報表示
- **概要**: 各プレイヤーの詳細成績
- **詳細**:
  - 使用ターン数
  - 出したカード枚数
  - 最後の手札枚数
  - プレイ時間

#### 6.3 再戦機能
- **概要**: 同じメンバーでもう一度プレイ
- **詳細**:
  - 「もう一度遊ぶ」ボタン
  - 全員の同意確認
  - ルーム待機画面へ戻る

#### 6.4 結果共有
- **概要**: リザルトをSNSなどで共有（将来機能）
- **詳細**:
  - スクリーンショット生成
  - SNS共有ボタン
  - テキスト形式のコピー

---

### 7. システム・設定機能

#### 7.1 音声・音量設定
- **概要**: ゲームのサウンド設定
- **詳細**:
  - BGM音量スライダー
  - 効果音音量スライダー
  - ミュート切り替え
  - 設定の保存

#### 7.2 通知設定
- **概要**: アプリ内通知の設定
- **詳細**:
  - ターン通知のON/OFF
  - チャット通知のON/OFF
  - 招待通知のON/OFF

#### 7.3 ヘルプ・チュートリアル
- **概要**: ゲームの遊び方を学習
- **詳細**:
  - 初回起動時のチュートリアル
  - ステップバイステップのガイド
  - 実践練習モード
  - スキップ機能

#### 7.4 利用規約・プライバシーポリシー
- **概要**: 法的情報の表示
- **詳細**:
  - 利用規約の表示
  - プライバシーポリシーの表示
  - スクロール可能なモーダル

---

### 8. 拡張機能（将来実装予定）

#### 8.1 フレンド機能
- **概要**: 友達リストの管理
- **詳細**:
  - フレンド申請・承認
  - フレンドリスト表示
  - オンライン状態表示
  - フレンドを招待

#### 8.2 ランキング
- **概要**: 全体ランキングの表示
- **詳細**:
  - 勝利数ランキング
  - 勝率ランキング
  - 週間・月間ランキング
  - 自分の順位表示

#### 8.3 実績システム
- **概要**: 特定の条件達成でバッジ獲得
- **詳細**:
  - 実績リスト表示
  - 達成条件の表示
  - バッジコレクション
  - 実績解除時の通知

#### 8.4 トーナメントモード
- **概要**: トーナメント形式の大会
- **詳細**:
  - トーナメント作成
  - トーナメント参加
  - トーナメント表の表示
  - 優勝賞品（バッジなど）

#### 8.5 カスタムルール
- **概要**: 独自のルールでプレイ
- **詳細**:
  - 特殊カードの追加
  - スキップ・リバースなどの効果
  - カスタムデッキ作成
  - ルールプリセット保存

#### 8.6 観戦モード
- **概要**: 他のプレイヤーの対戦を観戦
- **詳細**:
  - 観戦可能なルーム一覧
  - リアルタイム観戦
  - チャット機能
  - 全プレイヤーの手札は非表示

#### 8.7 AI対戦
- **概要**: CPUとの練習対戦
- **詳細**:
  - 難易度選択（Easy/Normal/Hard）
  - 1人プレイモード
  - AI戦績の記録

#### 8.8 テーマ・スキン
- **概要**: UIのカスタマイズ
- **詳細**:
  - カラーテーマ変更
  - カードデザイン変更
  - 背景画像変更
  - ダークモード対応

---

## 🔧 技術要件

### フロントエンド
- HTML5, CSS3 (Tailwind CSS)
- JavaScript (React推奨)
- WebSocket (リアルタイム通信)

### バックエンド
- Node.js + Express (推奨)
- WebSocket Server (Socket.io推奨)
- データベース（MongoDB / PostgreSQL）

### インフラ
- ホスティング（Vercel / Netlify / AWS）
- WebSocketサーバー（AWS / Heroku）

---

## 📱 対応プラットフォーム

- Webブラウザ（デスクトップ・モバイル対応）
- レスポンシブデザイン
- PWA対応（将来）

---

## 🎨 UX/UI要件

- 直感的な操作性
- 視認性の高いデザイン
- アニメーションによる視覚的フィードバック
- アクセシビリティ対応
- 多言語対応（日本語・英語）

---

## 🔐 セキュリティ要件

- 入力値の検証
- XSS対策
- CSRF対策
- WebSocket通信の暗号化
- レート制限